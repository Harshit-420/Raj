<!DOCTYPE html>
<html>
  <head>
    <title>Send Message</title>
  </head>
  <body>
    <input id="msg" type="text" placeholder="Message likho" />
    <button id="send">Send</button>
    <script>
      document.getElementById("send").addEventListener("click", () => {
        const msg = document.getElementById("msg").value;
        chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
          chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            args: [msg],
            func: (text) => {
              const input = document.querySelector('[contenteditable="true"]');
              if (input) {
                const event = new InputEvent('input', { bubbles: true });
                input.textContent = text;
                input.dispatchEvent(event);
                document.execCommand('insertText', false, text);
                const keyboardEvent = new KeyboardEvent('keydown', {
                  bubbles: true,
                  cancelable: true,
                  key: 'Enter',
                  code: 'Enter'
                });
                input.dispatchEvent(keyboardEvent);
              } else {
                alert("Input field not found.");
              }
            },
          });
        });
      });
    </script>
  </body>
</html>
